# 基础应用配置
# 此文件包含所有环境的通用配置

spring:
  application:
    name: bc-backend
  profiles:
    active: local
  sql:
    init:
      data-locations: classpath:db/data/*
      mode: always

  # 数据库通用配置
  datasource:
    url: ${DATASOURCE_URL}
    username: ${DATASOURCE_USERNAME}
    password: ${DATASOURCE_PASSWORD}

  # JPA通用配置
  jpa:
    database: mysql
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO}
    # defer data source initialization until after any EntityManagerFactory beans have been created and initialized.
    defer-datasource-initialization: true

  # Redis通用配置
  data:
    redis:
      client-type: jedis
      host: ${REDIS_HOST}
      port: ${REDIS_PORT}

    # MongoDB通用配置
    mongodb:
      uri: ${MONGODB_URI}
      username: ${MONGODB_USERNAME}
      password: ${MONGODB_PASSWORD}
      database: bigchuang
      authentication-database: ${MONGODB_AUTH_DATABASE}

  # RabbitMQ通用配置
  rabbitmq:
    host: ${RABBITMQ_HOST}
    port: ${RABBITMQ_PORT}
    username: ${RABBITMQ_USERNAME}
    password: ${RABBITMQ_PASSWORD}

  # AI通用配置
  ai:
    model:
      embedding: openai
      chat: deepseek
    openai:
      api-key: ${OPENAI_API_KEY:}
      base-url: ${OPENAI_BASE_URL:https://dashscope.aliyuncs.com/compatible-mode}
      embedding:
        options:
          model: text-embedding-v4
    deepseek:
      api-key: ${DEEPSEEK_API_KEY:}
      chat:
        options:
          model: deepseek-chat
          temperature: 0.8
    ollama:
      base-url: ${OLLAMA_BASE_URL:http://localhost:11434}
      embedding:
        options:
          model: ${OLLAMA_EMBEDDING_MODEL:nomic-embed-text}

# JWT通用配置
jwt:
  secret: ${JWT_SECRET:S3BIdWVCb0VSUEJuclBYbnVUNGY5NURDMTdZVWVsQjI0THNtS3N5c3RObkROVW0xS0lOSXRaV3Z0Z2dJSUZTaQ==}
  sessionTime: ${JWT_SESSION_TIME:86400}

# OSS通用配置
alioss:
  OSS_ACCESS_KEY_ID: ${OSS_ACCESS_KEY_ID:}
  OSS_ACCESS_KEY_SECRET: ${OSS_ACCESS_KEY_SECRET:}
  bucket: ${OSS_BUCKET:bc-resume}

# 百度搜索引擎
baidu:
  search-engine:
    api-key: ${SEARCH_ENGINE_APIKEY}

# 管理端点配置
management:
  endpoints:
    web:
      exposure:
        include: "*"